<%- include('partials/header') %>

<div class="dash-header">
    <h1>My Dashboard</h1>
    <a href="/new-blog" class="btn btn-primary">Create New Blog</a>
</div>

<div class="blog-grid" style="margin-top: 2rem;">
    <% if (blogs.length > 0) { %>
        <% blogs.forEach(blog => { %>
            <article class="glass-ui blog-card">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.5rem;">
                    <div class="blog-meta">
                        <%= blog.createdAt.toDateString() %>
                    </div>
                    <span class="tag" style="background: <%= blog.state === 'published' ? 'rgba(34, 197, 94, 0.1)' : 'rgba(234, 179, 8, 0.1)' %>; color: <%= blog.state === 'published' ? '#22c55e' : '#eab308' %>;">
                        <%= blog.state.toUpperCase() %>
                    </span>
                </div>
                
                <h3 style="font-size: 1.25rem; -webkit-text-fill-color: var(--text-main); margin-bottom: 1rem;">
                    <%= blog.title %>
                </h3>

                <div style="display: flex; gap: 0.5rem; margin-top: auto;">
                    <a href="/blog/<%= blog._id %>" class="btn btn-secondary" style="padding: 0.5rem 0.875rem; font-size: 0.875rem;">View</a>
                    <a href="/blog/<%= blog._id %>/edit" class="btn btn-secondary" style="padding: 0.5rem 0.875rem; font-size: 0.875rem;">Edit</a>
                    <form action="/blogs/<%= blog._id %>?_method=DELETE" method="POST" style="flex-grow: 1;">
                        <button type="submit" class="btn btn-danger" style="width: 100%; padding: 0.5rem 0.875rem; font-size: 0.875rem;" onclick="return confirm('Are you sure you want to delete this blog?')">Delete</button>
                    </form>
                </div>

                <div class="blog-meta" style="margin-top: 1rem;">
                    üìä <%= blog.read_count %> reads ‚Ä¢ ‚è±Ô∏è <%= blog.reading_time %> min
                </div>
            </article>
        <% }) %>
    <% } else { %>
        <div class="glass-ui" style="grid-column: 1 / -1; text-align: center; padding: 4rem;">
            <h2>No blogs yet</h2>
            <p style="color: var(--text-muted); margin-bottom: 2rem;">Ready to share your thoughts with the world?</p>
            <a href="/new-blog" class="btn btn-primary">Write Your First Blog</a>
        </div>
    <% } %>
</div>

<%- include('partials/footer') %>