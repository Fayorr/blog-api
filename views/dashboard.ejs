<%- include('partials/header') %>

<div class="dash-header">
    <h1>My Dashboard</h1>
    <a href="/new-blog" class="btn btn-primary">Create New Blog</a>
</div>

<div class="blog-grid">
    <% if (blogs.length > 0) { %>
        <% blogs.forEach(blog => { %>
            <article class="glass-ui blog-card">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.5rem;">
                    <div class="blog-meta">
                        <%= blog.createdAt.toDateString() %>
                    </div>
                    <span class="tag tag-<%= blog.state %>">
                        <%= blog.state %>
                    </span>
                </div>
                
                <h3 style="font-size: 1.25rem; -webkit-text-fill-color: var(--text-main); margin-bottom: 1rem;">
                    <%= blog.title %>
                </h3>

                <div class="flex-center-gap" style="margin-top: auto; justify-content: flex-start;">
                    <a href="/blog/<%= blog._id %>" class="btn btn-secondary btn-sm" style="flex: 1;">View</a>
                    <a href="/blog/<%= blog._id %>/edit" class="btn btn-secondary btn-sm" style="flex: 1;">Edit</a>
                    <form action="/blogs/<%= blog._id %>?_method=DELETE" method="POST" style="flex: 1;">
                        <button type="submit" class="btn btn-danger btn-sm" style="width: 100%;" onclick="return confirm('Are you sure you want to delete this blog?')">Delete</button>
                    </form>
                </div>

                <div class="blog-meta" style="margin-top: 1rem;">
                    üìä <%= blog.read_count %> reads ‚Ä¢ ‚è±Ô∏è <%= blog.reading_time %> min
                </div>
            </article>
        <% }) %>
    <% } else { %>
        <div class="glass-ui" style="grid-column: 1 / -1; text-align: center; padding: 4rem;">
            <h2>No blogs yet</h2>
            <p style="color: var(--text-muted); margin-bottom: 2rem;">Ready to share your thoughts with the world?</p>
            <a href="/new-blog" class="btn btn-primary">Write Your First Blog</a>
        </div>
    <% } %>
</div>

<%- include('partials/footer') %>