<%- include('partials/header') %>

<article class="article-container">
    <header class="article-header">
        <div style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
            <% if (blog.tags) { %>
                <% blog.tags.split(',').forEach(tag => { %>
                    <span class="tag"><%= tag.trim() %></span>
                <% }) %>
            <% } %>
        </div>
        
        <h1><%= blog.title %></h1>
        
        <div class="article-meta-bar">
            <div class="author-info">
                <div class="author-avatar">
                    <%= blog.author.first_name[0] %>
                </div>
                <div>
                    <div style="font-weight: 600;"><%= blog.author.first_name %> <%= blog.author.last_name %></div>
                    <div class="blog-meta"><%= blog.createdAt.toDateString() %> ‚Ä¢ <%= blog.reading_time %> min read</div>
                </div>
            </div>
            
            <div class="blog-meta" style="font-size: 1.1rem;">
                üëÅÔ∏è <%= blog.read_count %>
            </div>
        </div>
    </header>

    <div class="glass-ui article-body">
        <p style="white-space: pre-wrap;"><%= blog.body %></p>
    </div>

    <footer class="article-footer">
        <a href="/blog-list" class="btn btn-secondary" style="width: auto;">‚Üê Back to Explore</a>
        
        <% if (locals.user && locals.user.id === blog.author._id.toString()) { %> 
            <a href="/blog/<%= blog._id %>/edit" class="btn btn-primary" style="width: auto;">Edit Original Post</a>
        <% } %>
    </footer>
</article>

<%- include('partials/footer') %>