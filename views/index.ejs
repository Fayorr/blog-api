<%- include('partials/header') %>

<div class="dash-header">
    <h1>Published Blogs</h1>
</div>

<div class="blog-grid">
    <% if (blogs.length > 0) { %>
        <% blogs.forEach(blog => { %>
            <article class="glass-ui blog-card">
                <div class="blog-meta">
                    <%= blog.createdAt.toDateString() %> â€¢ <%= blog.reading_time %> min read
                </div>
                <h2 style="font-size: 1.5rem; -webkit-text-fill-color: var(--text-main);">
                    <a href="/blog/<%= blog._id %>"><%= blog.title %></a>
                </h2>
                <p style="color: var(--text-muted); flex-grow: 1; margin-bottom: 1.5rem;">
                    <%= blog.description || 'No description available for this post.' %>
                </p>
                <div style="display: flex; align-items: center; justify-content: space-between; margin-top: auto; flex-wrap: wrap; gap: 0.5rem;">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 0.875rem; font-weight: 600;">
                            <%= blog.author ? (blog.author.first_name + ' ' + blog.author.last_name) : 'Unknown Author' %>
                        </span>
                    </div>
                    <div class="blog-meta">
                        ğŸ‘ï¸ <%= blog.read_count %>
                    </div>
                </div>
                <div style="margin-top: 1rem;">
                    <% if (blog.tags) { %>
                        <% blog.tags.split(',').forEach(tag => { %>
                            <span class="tag"><%= tag.trim() %></span>
                        <% }) %>
                    <% } %>
                </div>
            </article>
        <% }) %>
    <% } else { %>
        <div class="glass-ui" style="grid-column: 1 / -1; text-align: center; padding: 4rem;">
            <p style="color: var(--text-muted);">No published blogs found yet.</p>
            <a href="/new-blog" class="btn btn-primary" style="margin-top: 1rem;">Start the first one</a>
        </div>
    <% } %>
</div>

<%- include('partials/footer') %>